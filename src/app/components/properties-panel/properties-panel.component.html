<div *mobxAutorun>
  <!-- Round Table Properties Panel -->
  <div *ngIf="selectedItem?.type === 'roundTable'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Round Table
    </div>

    <!-- Table Settings Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label for="tableSettings" class="text-gray-700 font-medium">Table Settings</label>
      </div>

      <!-- Radius -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Radius:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementRadius()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="roundTableProperties.radius" (ngModelChange)="updateProperty('radius', $event)" min="20"
            max="100" step="5">
          <button class="join-item btn btn-xs" (click)="incrementRadius()">+</button>
        </div>
      </div>

      <!-- Chairs -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Chairs:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementChairs()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="roundTableProperties.seats" (ngModelChange)="updateProperty('seats', $event)" min="4" max="20">
          <button class="join-item btn btn-xs" (click)="incrementChairs()">+</button>
        </div>
      </div>

      <!-- Open Spaces -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Open Spaces:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementOpenSpaces()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="roundTableProperties.openSpaces" (ngModelChange)="updateProperty('openSpaces', $event)" min="0"
            max="20">
          <button class="join-item btn btn-xs" (click)="incrementOpenSpaces()">+</button>
        </div>
      </div>
    </div>

    <!-- Shape Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label for="shapeToggle" class="text-gray-700 font-medium">Shape</label>
      </div>

      <!-- Rotation -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Rotation:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementRotation()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="roundTableProperties.rotation" (ngModelChange)="updateProperty('rotation', $event)" step="15">
          <button class="join-item btn btn-xs" (click)="incrementRotation()">+</button>
        </div>
      </div>
    </div>

    <!-- Table Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Table Labeling</label>
      </div>

      <!-- ID (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Id</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="selectedItem?.id || ''" disabled>
      </div>

      <!-- Displayed Label -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Display Label</label>
        <input type="text" class="input input-bordered input-sm w-36 max-w-xs" [ngModel]="roundTableProperties.name"
          (ngModelChange)="updateProperty('name', $event)">
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [ngModel]="roundTableProperties.tableLabelVisible"
            (ngModelChange)="updateProperty('tableLabelVisible', $event)">
        </label>
      </div>
    </div>

    <!-- Chair Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Chair Labeling</label>
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [ngModel]="roundTableProperties.chairLabelVisible"
            (ngModelChange)="updateProperty('chairLabelVisible', $event)">
        </label>
      </div>
    </div>

    <!-- Table position info (read-only) -->
    <div class="px-4 py-2 text-xs text-gray-500 bg-gray-50">
      X: {{selectedItem?.['x'] | number:'1.0-0'}}, Y: {{selectedItem?.['y'] | number:'1.0-0'}}
    </div>

    <!-- Delete Button -->
    <div class="px-4 py-2 mt-auto">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Delete
      </button>
    </div>
  </div>

  <!-- Rectangle Table Properties Panel -->
  <div *ngIf="selectedItem?.type === 'rectangleTable'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Rectangle Table
    </div>

    <!-- Table Settings Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label for="tableSettings" class="text-gray-700 font-medium">Table Settings</label>
      </div>

      <!-- Width -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Width:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementWidth()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.width" (ngModelChange)="updateProperty('width', $event)" min="60"
            max="300" step="10">
          <button class="join-item btn btn-xs" (click)="incrementWidth()">+</button>
        </div>
      </div>

      <!-- Height -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Height:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementHeight()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.height" (ngModelChange)="updateProperty('height', $event)" min="40"
            max="200" step="10">
          <button class="join-item btn btn-xs" (click)="incrementHeight()">+</button>
        </div>
      </div>
    </div>

    <!-- Chair Distribution Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Chair Distribution</label>
        <span class="ml-auto text-xs text-gray-500">Total: {{totalChairsRect}}</span>
      </div>

      <!-- Top Chairs -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Top:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementUpChairs()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.upChairs" (ngModelChange)="updateProperty('upChairs', $event)" min="0"
            max="20">
          <button class="join-item btn btn-xs" (click)="incrementUpChairs()">+</button>
        </div>
      </div>

      <!-- Bottom Chairs -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Bottom:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementDownChairs()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.downChairs" (ngModelChange)="updateProperty('downChairs', $event)"
            min="0" max="20">
          <button class="join-item btn btn-xs" (click)="incrementDownChairs()">+</button>
        </div>
      </div>

      <!-- Left Chairs -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Left:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementLeftChairs()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.leftChairs" (ngModelChange)="updateProperty('leftChairs', $event)"
            min="0" max="20">
          <button class="join-item btn btn-xs" (click)="incrementLeftChairs()">+</button>
        </div>
      </div>

      <!-- Right Chairs -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Right:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementRightChairs()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.rightChairs" (ngModelChange)="updateProperty('rightChairs', $event)"
            min="0" max="20">
          <button class="join-item btn btn-xs" (click)="incrementRightChairs()">+</button>
        </div>
      </div>
    </div>

    <!-- Shape Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label for="shapeToggle" class="text-gray-700 font-medium">Shape</label>
      </div>

      <!-- Rotation -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Rotation:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementRotation()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="rectangleTableProperties.rotation" (ngModelChange)="updateProperty('rotation', $event)"
            step="15">
          <button class="join-item btn btn-xs" (click)="incrementRotation()">+</button>
        </div>
      </div>
    </div>

    <!-- Table Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Table Labeling</label>
      </div>

      <!-- ID (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Id</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="selectedItem?.id || ''" disabled>
      </div>

      <!-- Displayed Label -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Display Label</label>
        <input type="text" class="input input-bordered input-sm w-36 max-w-xs" [ngModel]="rectangleTableProperties.name"
          (ngModelChange)="updateProperty('name', $event)">
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [ngModel]="rectangleTableProperties.tableLabelVisible"
            (ngModelChange)="updateProperty('tableLabelVisible', $event)">
        </label>
      </div>
    </div>

    <!-- Chair Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Chair Labeling</label>
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [ngModel]="rectangleTableProperties.chairLabelVisible"
            (ngModelChange)="updateProperty('chairLabelVisible', $event)">
        </label>
      </div>
    </div>

    <!-- Table position info (read-only) -->
    <div class="px-4 py-2 text-xs text-gray-500 bg-gray-50">
      X: {{selectedItem?.['x'] | number:'1.0-0'}}, Y: {{selectedItem?.['y'] | number:'1.0-0'}}
    </div>

    <!-- Delete Button -->
    <div class="px-4 py-2 mt-auto">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Delete
      </button>
    </div>
  </div>

  <!-- Line Properties Panel -->
  <div *ngIf="selectedItem?.type === 'line'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Line
    </div>

    <!-- Line Appearance Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Line Appearance</label>
      </div>

      <!-- Thickness -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Thickness:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementThickness()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="lineProperties.thickness" (ngModelChange)="updateProperty('thickness', $event)" min="1"
            max="10" step="1">
          <button class="join-item btn btn-xs" (click)="incrementThickness()">+</button>
        </div>
      </div>

      <!-- Color -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Color:</label>
        <input type="color" class="w-16 h-8 border border-gray-300 rounded cursor-pointer"
          [ngModel]="lineProperties.color" (ngModelChange)="updateProperty('color', $event)">
      </div>

    </div>

    <!-- Line Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Line Labeling</label>
      </div>

      <!-- ID (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Id</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="selectedItem?.id || ''" disabled>
      </div>

      <!-- Displayed Label -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Display Label</label>
        <input type="text" class="input input-bordered input-sm w-36 max-w-xs" [ngModel]="lineProperties.name"
          (ngModelChange)="updateProperty('name', $event)">
      </div>
    </div>

    <!-- Line coordinates info (read-only) -->
    <div class="px-4 py-2 text-xs text-gray-500 bg-gray-50">
      <div>Start: {{lineProperties.startX | number:'1.0-0'}}, {{lineProperties.startY | number:'1.0-0'}}</div>
      <div>End: {{lineProperties.endX | number:'1.0-0'}}, {{lineProperties.endY | number:'1.0-0'}}</div>
    </div>

    <!-- Delete Button -->
    <div class="px-4 py-2 mt-auto">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Delete
      </button>
    </div>
  </div>

  <!-- Polygon Properties Panel -->
  <div *ngIf="selectedItem?.type === 'polygon'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Polygon
    </div>

    <!-- Polygon Appearance Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Polygon Appearance</label>
      </div>

      <!-- Fill Color -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Fill Color:</label>
        <div class="flex gap-2">
          <input 
            type="color" 
            class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
            [ngModel]="polygonProperties.fillColor"
            (ngModelChange)="updateProperty('fillColor', $event)">
          <input 
            type="text" 
            class="input input-bordered input-xs flex-1 w-16 text-xs"
            [ngModel]="polygonProperties.fillColor"
            (ngModelChange)="updateProperty('fillColor', $event)">
        </div>
      </div>

      <!-- Fill Opacity -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Fill Opacity:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementFillOpacity()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="polygonProperties.fillOpacity" (ngModelChange)="updateProperty('fillOpacity', $event)" 
            min="0" max="1" step="0.1">
          <button class="join-item btn btn-xs" (click)="incrementFillOpacity()">+</button>
        </div>
      </div>

      <!-- Border Color -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Border Color:</label>
        <div class="flex gap-2">
          <input 
            type="color" 
            class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
            [ngModel]="polygonProperties.borderColor"
            (ngModelChange)="updateProperty('borderColor', $event)">
          <input 
            type="text" 
            class="input input-bordered input-xs flex-1 w-16 text-xs"
            [ngModel]="polygonProperties.borderColor"
            (ngModelChange)="updateProperty('borderColor', $event)">
        </div>
      </div>

      <!-- Border Thickness -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Border Thickness:</label>
        <div class="join">
          <button class="join-item btn btn-xs" (click)="decrementBorderThickness()">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [ngModel]="polygonProperties.borderThickness" (ngModelChange)="updateProperty('borderThickness', $event)" 
            min="0" max="10" step="1">
          <button class="join-item btn btn-xs" (click)="incrementBorderThickness()">+</button>
        </div>
      </div>

      <!-- Show Border Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Show Border</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [ngModel]="polygonProperties.showBorder"
            (ngModelChange)="updateProperty('showBorder', $event)">
        </label>
      </div>
    </div>

    <!-- Polygon Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Polygon Labeling</label>
      </div>

      <!-- ID (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Id</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="selectedItem?.id || ''" disabled>
      </div>

      <!-- Display Name -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Display Name</label>
        <input type="text" class="input input-bordered input-sm w-36 max-w-xs" 
          [ngModel]="polygonProperties.name"
          (ngModelChange)="updateProperty('name', $event)">
      </div>
    </div>

    <!-- Polygon Info Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Polygon Info</label>
      </div>

      <!-- Points Count (non-editable) -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Points:</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="polygonProperties.points.length" disabled>
      </div>
    </div>

    <!-- Polygon position info (read-only) -->
    <div class="px-4 py-2 text-xs text-gray-500 bg-gray-50">
      X: {{selectedItem?.['x'] | number:'1.0-0'}}, Y: {{selectedItem?.['y'] | number:'1.0-0'}}
    </div>

    <!-- Delete Button -->
    <div class="px-4 py-2 mt-auto">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Delete
      </button>
    </div>
  </div>

  <!-- Empty state panel -->
  <div *ngIf="!selectedItem"
    class="w-64 h-full bg-white shadow-lg flex flex-col items-center justify-center p-4 text-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400 mb-2" fill="none" viewBox="0 0 24 24"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <h3 class="text-base font-medium text-gray-700 mb-1">No Element Selected</h3>
    <p class="text-xs text-gray-500">Select an element on the canvas to edit properties</p>
  </div>

  <!-- Seating Row Properties -->
  <div *ngIf="selectedItem?.type === 'seatingRow'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Seating Row
    </div>

    <!-- Row Settings Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Row Settings</label>
      </div>

      <!-- Number of seats -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Number of seats:</label>
        <div class="join">
          <button class="join-item btn btn-xs"
            (click)="updateProperty('seatCount', ($any(selectedItem)['seatCount'] || 1) - 1)">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [value]="$any(selectedItem)['seatCount']"
            (change)="updateProperty('seatCount', $any($event.target)['value'])" min="1" max="50">
          <button class="join-item btn btn-xs"
            (click)="updateProperty('seatCount', ($any(selectedItem)['seatCount'] || 1) + 1)">+</button>
        </div>
      </div>

      <!-- Seat spacing -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Seat spacing:</label>
        <div class="join">
          <button class="join-item btn btn-xs"
            (click)="updateProperty('seatSpacing', ($any(selectedItem)['seatSpacing'] || 35) - 1)">-</button>
          <input type="number" class="join-item input input-bordered input-xs w-14 text-center"
            [value]="$any(selectedItem)['seatSpacing']"
            (change)="updateProperty('seatSpacing', $any($event.target)['value'])" min="20" max="100">
          <button class="join-item btn btn-xs"
            (click)="updateProperty('seatSpacing', ($any(selectedItem)['seatSpacing'] || 35) + 1)">+</button>
          <span class="text-xs text-gray-500 ml-1">px</span>
        </div>
      </div>
    </div>

    <!-- Row Label Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Row Label</label>
      </div>

      <!-- Row name -->
      <div class="mb-2">
        <input type="text" class="input input-bordered input-sm w-full" [value]="$any(selectedItem)['name']"
          (input)="updateProperty('name', $any($event.target)['value'])" placeholder="Enter row name">
      </div>

      <!-- Label position -->
      <div class="mb-2">
        <label class="text-sm text-gray-600 block mb-1">Label position:</label>
        <div class="grid grid-cols-3 gap-1">
          <button class="btn btn-xs" [class.btn-primary]="$any(selectedItem)['labelPosition'] === 'left'"
            (click)="updateProperty('labelPosition', 'left')">Left</button>
          <button class="btn btn-xs" [class.btn-primary]="$any(selectedItem)['labelPosition'] === 'center'"
            (click)="updateProperty('labelPosition', 'center')">Center</button>
          <button class="btn btn-xs" [class.btn-primary]="$any(selectedItem)['labelPosition'] === 'right'"
            (click)="updateProperty('labelPosition', 'right')">Right</button>
        </div>
      </div>

      <!-- Row Label Visibility -->
      <div class="flex items-center justify-between mt-3">
        <label class="text-sm text-gray-600">Show row label</label>
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" class="sr-only peer" [checked]="$any(selectedItem)['rowLabelVisible']"
            (change)="updateProperty('rowLabelVisible', $any($event.target)['checked'])">
          <div
            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
          </div>
        </label>
      </div>

      <!-- Show seat labels toggle -->
      <div class="flex items-center justify-between mt-3">
        <label class="text-sm text-gray-600">Show seat labels</label>
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" class="sr-only peer" [checked]="$any(selectedItem)['chairLabelVisible']"
            (change)="updateProperty('chairLabelVisible', $any($event.target)['checked'])">
          <div
            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
          </div>
        </label>
      </div>
    </div>

    <!-- Delete button -->
    <div class="px-4 py-3">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        Delete Row
      </button>
    </div>
  </div>

  <!-- Segmented Seating Row Properties Panel -->
  <div *ngIf="selectedItem?.type === 'segmentedSeatingRow'" class="w-64 h-full bg-white overflow-y-auto shadow-lg">
    <!-- Header with element title -->
    <div class="px-4 py-3 text-black font-medium text-lg flex items-center justify-center">
      Segmented Seating Row
    </div>

    <!-- Row Stats Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Row Stats</label>
      </div>

      <!-- Total Segments (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Total Segments:</label>
        <div class="text-sm font-medium">
          {{ segmentedSeatingRowProperties.totalSegments }}
        </div>
      </div>

      <!-- Total Seats (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Total Seats:</label>
        <div class="text-sm font-medium">
          {{ segmentedSeatingRowProperties.totalSeats }}
        </div>
      </div>

      <!-- Seat Spacing -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Seat Spacing:</label>
        <input type="number" class="input input-bordered input-xs w-14 text-center"
          [(ngModel)]="segmentedSeatingRowProperties.seatSpacing"
          (change)="updateProperty('seatSpacing', segmentedSeatingRowProperties.seatSpacing)" min="20" max="100"
          step="5">
      </div>
    </div>


    <!-- Row Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Row Labeling</label>
      </div>

      <!-- ID (non-editable) -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Id</label>
        <input type="text" class="input input-bordered input-sm input-disabled w-36 text-xs text-right"
          [value]="selectedItem?.id || ''" disabled>
      </div>

      <!-- Displayed Label -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Display Label</label>
        <input type="text" class="input input-bordered input-sm w-36 max-w-xs"
          [(ngModel)]="segmentedSeatingRowProperties.name"
          (input)="updateProperty('name', segmentedSeatingRowProperties.name)">
      </div>

      <!-- Label Position -->
      <div class="flex items-center justify-between mb-2">
        <label class="text-sm text-gray-600">Position</label>
        <select class="select select-bordered select-sm w-36" [(ngModel)]="segmentedSeatingRowProperties.labelPosition"
          (change)="updateProperty('labelPosition', segmentedSeatingRowProperties.labelPosition)">
          <option value="left">Left</option>
          <option value="center">Center</option>
          <option value="right">Right</option>
        </select>
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [(ngModel)]="segmentedSeatingRowProperties.rowLabelVisible"
            (change)="updateProperty('rowLabelVisible', segmentedSeatingRowProperties.rowLabelVisible)">
        </label>
      </div>
    </div>

    <!-- Chair Labeling Section -->
    <div class="px-4 py-3 border-b border-gray-100">
      <div class="flex items-center mb-3">
        <label class="text-gray-700 font-medium">Chair Labeling</label>
      </div>

      <!-- Visible Toggle -->
      <div class="flex items-center justify-between">
        <label class="text-sm text-gray-600">Visible</label>
        <label class="cursor-pointer">
          <input type="checkbox" class="toggle toggle-warning toggle-sm"
            [(ngModel)]="segmentedSeatingRowProperties.chairLabelVisible"
            (change)="updateProperty('chairLabelVisible', segmentedSeatingRowProperties.chairLabelVisible)">
        </label>
      </div>
    </div>

    <!-- Table position info (read-only) -->
    <div class="px-4 py-2 text-xs text-gray-500 bg-gray-50">
      X: {{selectedItem?.['x'] | number:'1.0-0'}}, Y: {{selectedItem?.['y'] | number:'1.0-0'}}
    </div>

    <!-- Delete Button -->
    <div class="px-4 py-2 mt-auto">
      <button class="btn btn-error btn-sm w-full" (click)="deleteElement()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Delete
      </button>
    </div>
  </div>
</div>